const {
  GoogleGenerativeAI,
} = require("@google/generative-ai");

const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  // maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Tokyo, for 3 Days and 2 Night for Only Me with a Cheap budget with a Flight details, Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time to travel each of the location for 3 days and 2 night with each day plan with best time to visit with following interests City Breaks ðŸŒ‡, Glamping â›º, Nature Escapes ðŸŒ¿, Road Trips ðŸš—, Backpacking ðŸŽ’ in JSON.\n",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a JSON-formatted travel plan for Tokyo, tailored to a solo budget traveler, focusing on your stated interests and incorporating the requested details.  This is a *sample* plan, prices are estimates and subject to change, and availability should be checked at the provided URLs or other booking platforms.\n\n```json\n{\n  "tripDetails": {\n    "location": "Tokyo, Japan",\n    "duration": "3 Days, 2 Nights",\n    "travelerType": "Solo",\n    "budget": "Cheap/Budget",\n    "interests": [\n      "City Breaks ðŸŒ‡",\n      "Nature Escapes ðŸŒ¿",\n      "Backpacking ðŸŽ’"\n    ]\n  },\n  "flightDetails": {\n    "airline": "Example Budget Airline (e.g., Peach Aviation, Jetstar Japan)",\n    "origin": "Your Departure City",\n    "destination": "Tokyo (NRT or HND)",\n    "estimatedPrice": 300,\n    "bookingUrl": "https://www.example-airline.com",\n    "notes": "Prices vary greatly depending on your origin, time of year, and how far in advance you book.  Check multiple budget airlines and use flight comparison websites (Skyscanner, Google Flights) for the best deals. Be flexible with your dates!"\n  },\n  "accommodationOptions": [\n    {\n      "hotelName": "UNPLAN Shinjuku",\n      "address": "5-3-15 Shinjuku, Shinjuku-ku, Tokyo 160-0022, Japan",\n      "pricePerNight": 30,\n      "imageUrl": "https://example.com/unplan_shinjuku.jpg",\n      "geoCoordinates": {\n        "latitude": 35.6937,\n        "longitude": 139.7035\n      },\n      "rating": 4.5,\n      "description": "Stylish hostel in Shinjuku with a cafe/bar, offering dorm rooms and private rooms.  Great for meeting other travelers. Close to Shinjuku Gyoen National Garden.",\n      "nearbyPlaces": [\n        {\n          "placeName": "Shinjuku Gyoen National Garden",\n          "details": "Beautiful garden with diverse landscapes (English, French, Japanese). A peaceful escape from the city.",\n          "imageUrl": "https://example.com/shinjuku_gyoen.jpg",\n          "geoCoordinates": {\n            "latitude": 35.6853,\n            "longitude": 139.7155\n          },\n          "ticketPricing": 500,\n          "timeToTravel": "5-minute walk"\n        }\n      ]\n    },\n    {\n      "hotelName": "Khaosan Tokyo Kabuki",\n      "address": "3-16-2 Asakusa, Taito-ku, Tokyo 111-0032, Japan",\n      "pricePerNight": 25,\n      "imageUrl": "https://example.com/khaosan_kabuki.jpg",\n      "geoCoordinates": {\n        "latitude": 35.7113,\n        "longitude": 139.7979\n      },\n      "rating": 4.0,\n      "description": "Well-located hostel in Asakusa, known for its friendly atmosphere and traditional Japanese design.  Close to Senso-ji Temple.",\n      "nearbyPlaces": [\n        {\n          "placeName": "Senso-ji Temple",\n          "details": "Tokyo\'s oldest temple, a major pilgrimage site with a vibrant market street.",\n          "imageUrl": "https://example.com/sensoji.jpg",\n          "geoCoordinates": {\n            "latitude": 35.7147,\n            "longitude": 139.7966\n          },\n          "ticketPricing": "Free",\n          "timeToTravel": "2-minute walk"\n        }\n      ]\n    },\n    {\n      "hotelName": "CITAN Hostel",\n      "address": "2-4-2 Nihonbashihisamatsu-cho, Chuo-ku, Tokyo",\n      "pricePerNight": 35,\n      "imageUrl": "https://example.com/citan_hostel.jpg",\n      "geoCoordinates": {\n        "latitude": 35.6906,\n        "longitude": 139.7806\n      },\n      "rating": 4.2,\n      "description": "Stylish hostel with a cafe, bar, and event space.  Located near the Sumida River. Offers both dorms and private rooms.",\n      "nearbyPlaces": [\n        {\n          "placeName": "Sumida River",\n          "details": "Scenic river with cruises and parks.  Good for a relaxing walk.",\n          "imageUrl": "https://example.com/sumida_river.jpg",\n          "geoCoordinates": {\n            "latitude": 35.6930,\n            "longitude": 139.7861\n          },\n          "ticketPricing": "Free (for walking along the river)",\n          "timeToTravel": "5-minute walk"\n        }\n      ]\n    }\n  ],\n  "dailyPlan": {\n    "day1": {\n      "theme": "Asakusa & Ueno - Tradition and Culture",\n      "bestTimeToVisit": "Morning/Early Afternoon",\n      "activities": [\n        {\n          "time": "9:00 AM",\n          "place": "Senso-ji Temple (Asakusa)",\n          "description": "Explore Tokyo\'s oldest temple.  Wander through Nakamise-dori market street for souvenirs and snacks.",\n          "duration": "2-3 hours"\n        },\n        {\n          "time": "12:00 PM",\n          "place": "Lunch in Asakusa",\n          "description": "Try local street food or find a cheap ramen shop.  Look for \'Monjayaki\' (a savory pancake).",\n          "duration": "1 hour"\n        },\n        {\n          "time": "1:00 PM",\n          "place": "Ueno Park",\n          "description": "Visit Ueno Park, home to several museums (Tokyo National Museum, Tokyo Metropolitan Art Museum, Ueno Zoo).  Choose one or two museums based on your interests.",\n          "duration": "3-4 hours"\n        },\n        {\n          "time": "5:00 PM",\n          "place": "Ameya Yokocho Market (Ueno)",\n          "description": "Explore this bustling market for cheap snacks, clothing, and souvenirs.",\n          "duration": "1-2 hours"\n        },\n        {\n          "time": "7:00 PM",\n          "place": "Dinner in Ueno or Asakusa",\n          "description": "Find a budget-friendly restaurant or explore the evening street food options.",\n          "duration": "1-2 hours"\n        }\n      ]\n    },\n    "day2": {\n      "theme": "Shinjuku & Shibuya - Modern Tokyo",\n      "bestTimeToVisit": "Afternoon/Evening",\n      "activities": [\n        {\n          "time": "10:00 AM",\n          "place": "Shinjuku Gyoen National Garden",\n          "description": "A beautiful oasis in the city.  Explore the different garden styles.",\n          "duration": "2-3 hours"\n        },\n        {\n          "time": "1:00 PM",\n          "place": "Lunch in Shinjuku",\n          "description": "Explore the Shinjuku area for budget-friendly lunch options. Many options for ramen and other Japanese and international cousine",\n          "duration": "1 hour"\n        },\n        {\n          "time": "2:00 PM",\n          "place": "Tokyo Metropolitan Government Building",\n          "description": "Free observation decks with panoramic city views. A great way to get your bearings.",\n          "duration": "1-2 hours"\n        },\n        {\n          "time": "4:00 PM",\n          "place": "Shibuya Crossing",\n          "description": "Experience the iconic scramble crossing.  Take photos from the Starbucks overlooking the crossing (but be prepared for crowds).",\n          "duration": "1-2 hours"\n        },\n        {\n          "time": "6:00 PM",\n          "place": "Harajuku",\n          "description": "Explore the vibrant and quirky fashion district.  Walk down Takeshita Street. ",\n          "duration": "1-2 hours"\n        },\n        {\n          "time": "8:00 PM",\n          "place": "Dinner in Shibuya or Shinjuku",\n          "description": "Find a budget-friendly restaurant or try some street food.",\n          "duration": "1-2 hours"\n        }\n      ]\n    },\n    "day3": {\n      "theme": "Nature Escape & Departure",\n      "bestTimeToVisit": "Morning",\n      "activities": [\n        {\n          "time": "9:00 AM",\n          "place": "Hamarikyu Gardens",\n          "description": "Traditional Japanese garden with a teahouse and stunning views of Tokyo Bay. (A good alternative if you want to avoid the crowds of Shinjuku Gyoen).",\n          "duration": "2-3 hours"\n        },\n        {\n          "time": "12:00 PM",\n          "place": "Lunch near Hamarikyu Gardens",\n          "description": "Grab a quick and cheap lunch.",\n          "duration": "1 hour"\n        },\n        {\n          "time": "1:00 PM",\n          "place": "Travel to Airport",\n          "description": "Allow ample time to travel to Narita (NRT) or Haneda (HND) airport.  The Narita Express or Limousine Bus are convenient (but pricier) options.  The Keisei Skyliner to Narita is a cheaper option.  Local trains are the cheapest, but take longer and can be crowded.",\n          "duration": "Variable - depends on airport and transportation method"\n        },\n        {\n          "time": "Afternoon/Evening",\n          "place": "Departure",\n          "description": "Depart from Tokyo.",\n          "duration": "N/A"\n        }\n      ]\n    }\n  },\n  "additionalNotes": {\n    "transportation": "Consider purchasing a Suica or Pasmo card for easy travel on trains and buses.  Download a Japan Rail Pass if it makes sense for your overall itinerary (may not be worth it for just 3 days in Tokyo).",\n    "food": "Ramen, udon, soba, and donburi are all cheap and delicious options.  Convenience stores (like 7-Eleven, FamilyMart, Lawson) offer affordable meals and snacks.",\n    "internet": "Consider renting a pocket wifi device or purchasing a local SIM card.  Many cafes and public spaces offer free wifi.",\n    "language": "Learning a few basic Japanese phrases will be helpful.  Many signs have English translations, but not always.",\n    "backpackingTips": "Look for free walking tours. Pack light to save on baggage fees. Use coin lockers to store your luggage if needed. Consider a capsule hotel for a unique and budget-friendly experience.",\n    "glamping": "Glamping is not readily available in the center of Tokyo. However, it\'s possible to do a day trip or overnight trip to areas outside of Tokyo that offer glamping, such as around Mount Fuji. This would significantly increase the budget."\n  }\n}\n```\n\n**Important Notes:**\n\n*   **Replace Placeholders:**  Fill in the bracketed placeholders (e.g., `Your Departure City`, `https://www.example-airline.com`) with your actual information.\n*   **Image URLs:** The `imageUrl` values are examples. Replace them with actual image URLs from Google Images, Unsplash, or other sources.\n*   **Pricing:**  All prices are *estimates* and can vary significantly based on the season, availability, and booking time. Always check current prices on booking websites.\n*   **Availability:** Hotel and flight availability are *not guaranteed*. Book in advance, especially during peak season.\n*   **Transportation:** The Japan Rail Pass is only cost-effective if you plan on significant long-distance travel within Japan.  For just Tokyo, a Suica or Pasmo card is more practical.\n*   **Flexibility:**  Be prepared to adjust your plans based on weather, your interests, and unexpected events.\n*   **Safety:** Tokyo is a very safe city, but be aware of your surroundings and take normal precautions.\n*   **Glamping:** If you want to incorporate glamping, research options near Mt. Fuji or other accessible areas. This will require extra travel time and likely increase your budget.\n\nThis JSON provides a solid foundation for your trip planning.  Good luck!\n',
        },
      ],
    },
  ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());
